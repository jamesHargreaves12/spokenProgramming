import matplotlib.pyplot as plt

from tools.get_test_data import test_train_split


def get_length_transcripts():
    test,train = test_train_split[0]
    result = []
    for ts,ps in test:
        result.append(len(ts))
    return result

def order_by_length_transcript(timings,trans_len):
    lens_labled = [(x,i) for i,x in enumerate(trans_len)]
    sorted_lens_labled = sorted(lens_labled)
    order = [i for x,i in sorted_lens_labled]
    return [timings[i] for i in order]


def plot_timing(timing:list,len_trans,label):
    ys = order_by_length_transcript(timing,len_trans)
    xs = sorted(len_trans)
    plt.plot(xs,ys,"o",label=label)


len_trans = get_length_transcripts()
print(sorted(len_trans))
baseline_stem = [0.0968170166015625, 0.19150590896606445, 0.7245781421661377, 0.1368100643157959, 0.09847593307495117, 0.04354500770568848, 0.20106291770935059, 0.1636500358581543, 0.40052199363708496, 0.19308900833129883, 0.13666367530822754, 0.15813708305358887, 0.14440274238586426, 0.2754487991333008, 0.1452641487121582]
baseline_no_stem = [0.0020220279693603516, 0.003732919692993164, 0.013299942016601562, 0.0026369094848632812, 0.0018658638000488281, 0.0008978843688964844, 0.003396749496459961, 0.0029420852661132812, 0.006970882415771484, 0.003593921661376953, 0.0025069713592529297, 0.002819061279296875, 0.002671957015991211, 0.004987955093383789, 0.0029201507568359375]
traditional = [0.011715888977050781, 0.008018970489501953, 0.04786825180053711, 0.005173921585083008, 0.0029439926147460938, 0.0013740062713623047, 0.006769895553588867, 0.006816864013671875, 0.01618790626525879, 0.009320974349975586, 0.008222103118896484, 0.010998010635375977, 0.009816884994506836, 0.022170066833496094, 0.007886171340942383]
split_v2 = [23.12692379951477,22.844212293624878,434.9811270236969,10.40550184249878,7.464533090591431,4.2154459953308105,86.34649896621704,32.9644501209259,119.89831709861755,23.19358801841736,38.108457803726196,52.65353083610535,48.61141300201416,21.856606006622314,35.66709780693054]
audio = [13.704, 26.04, 56.616, 23.304, 16.896, 7.056, 16.344, 28.416, 31.584, 23.424, 26.544, 25.464, 21.024, 45.576, 41.064]
enhanced = [6.980260133743286, 25.75556707382202, 126.36821222305298, 6.4773030281066895, 2.883046865463257, 3.4585189819335938, 57.03824710845947, 34.222909927368164, 65.17370796203613, 16.364892959594727, 46.97385907173157, 61.98950695991516, 8.504903316497803, 18.485196113586426, 15.36611294746399]

# plot_timing(baseline_no_stem, len_trans,"baseline")
plot_timing(audio, len_trans,"audio")
plot_timing(enhanced, len_trans,"improved")
plot_timing(split_v2, len_trans,"split v2")
# plot_timing(traditional, len_trans,"traditional")
# plot_timing(baseline_stem, len_trans,"baseline + stem")
plt.yscale('log')
plt.xlabel("Length of transcript file in words")
plt.ylabel("Time")
plt.legend()
plt.show()